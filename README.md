# [Stardew Crop Profits](https://polarstoat.github.io/stardew-crop-profits/)

A tool to calculate the profitability of crops in Stardew Valley

**[Open application →](https://polarstoat.github.io/stardew-crop-profits/)**

### How it works

In Stardew Valley there are many variables that effect the growth and sell prices of crops. Random number generation (RNG) is also used. As such, accurately calculating profitability is *very difficult*. This project aims to be as accurate as possible, and make clear what is and isn't being accounted for in its calculation logic.

#### What's accounted for

* The current in-game date [^1]
* The ratio of gold:silver:regular quality crops, as determined by farming level and fertilizer used
* The 'Tiller' and 'Agriculturist' professions
* The growth speed of a crop, as determined by fertilizer and 'Agriculturist' profession[^2]
* Which shops the player chooses to buy from, and the cost of seeds only from the players chosen shops
* The minimum yield for each crop, and the chance for extra crops when harvesting
* Whether the player buys seeds, or uses the Seed Maker

[^1]: Excludes crops which are not yet available to the player (e.g. The year 2 crops from Pierre [Garlic, Red Cabbage, and Artichoke], Strawberries [Not available before 13th of Spring, Year 1])
[^2]: Also emulates the [floating point imprecision](https://stardewvalleywiki.com/Talk:Speed-Gro#Floating_point_imprecision) of the game to ensure results that match the in-game experience

#### What's NOT accounted for

* The cost of fertilizer, including how long it remains for
* Daily luck levels
* Use of the Greenhouse
* Giant crops

*These are all planned features*

### The calculations

Different calculations are used depending on which 'Show profit as' option is chosen: minimum profit, or average profit.

#### Minimum profit

This is the absolute minimum profit possible to be made, assuming that no quality crops are harvested, and only the minimum yield for each crop is harvested (no extra crops):

<pre>( Harvests ✖️ Yield ✖️ Sell price ) ➖ Seed price</pre>

This calculation is identical to that on the [Stardew Valley Wiki](https://stardewvalleywiki.com/Crops#Gold_per_Day).

#### Average profit

<pre>( Harvests ✖️ ( Yield ➕ Chance for extra crops ) ✖️ ( ( Normal quality sell price ✖️ Chance for normal quality ) ➕ ( Silver quality sell price ✖️ Chance for silver quality ) ➕ ( Gold quality sell price ✖️ Chance for gold quality ) ) ) ➖ Seed price</pre>

## Development

### Requirements

* [Node.js](https://nodejs.org/) >=10.1.0
* [npm](https://www.npmjs.com/get-npm) >=6.0.1
* [gulp-cli](https://www.npmjs.com/package/gulp-cli) >=2.0.1

> This project has only been tested with the above requirements, but there is a good chance that it will work with earlier versions

### Setup

1. Clone this repository

   ```bash
   git clone https://github.com/polarstoat/stardew-crop-profits.git
   ```

2. Change into the new directory

   ```bash
   cd stardew-crop-profits/
   ```

3. Install dependencies

   ```bash
   npm install
   ```

### Usage

1. Run the default gulp task for development (this is an alias for `gulp serve`)

   ```bash
   gulp
   ```

2. Run the `deploy` gulp task to publish to [GitHub Pages](https://pages.github.com)

   ```bash
   gulp deploy
   ```

### Project structure

```
.
├── app/
│   ├── img/
│   ├── js/
│   ├── scss/
│   └── index.html
├── dist/
│   ├── css/
│   ├── img/
│   ├── js/
│   └── index.html
├── .eslintrc.js
├── .gitignore
├── README.md
├── gulpfile.js
├── package-lock.json
├── package.json
└── stardew-crop-profits.sublime-project
```

File | Purpose
--- | ---
`app/` | Source code of the application. The contents of this folder are compiled and minified by gulp, and then copied to `dist/`
`dist/` | Compiled and minified, distribution code. The contents of this folder are pushed to GitHub Pages. As this contains entirely 'built' code, this folder is ignored by Git
`.eslintrc.js` | Configuration for the [ESLint](https://eslint.org) JS linter
`.gitignore` | Specifies what files Git should ignore ([documentation](https://git-scm.com/docs/gitignore))
`README.md` | Information about the project
`gulpfile.js` | Tasks to be run by [gulp](https://gulpjs.com) for automating Sass compilation, JS minification, GitHub Pages deployment, etc.
`package-lock.json` | Automatically generated by npm to manage the `node_modules/` tree ([documentation](https://docs.npmjs.com/files/package-lock.json))
`package.json` | Manages project dependencies ([documentation](https://docs.npmjs.com/files/package.json))
`stardew-crop-profits.sublime-project` | Project file for Sublime Text ([documentation](https://www.sublimetext.com/docs/3/projects.html))
